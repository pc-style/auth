{
  "meta": {
    "project": "auth.pcstyle.dev",
    "date": "2026-01-15",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "auth.pcstyle.dev is a centralized authentication service tailored for the pcstyle.dev ecosystem, leveraging WorkOS AuthKit to provide seamless, secure authentication with a cybernetic-themed user interface.",
  "core_goals": [
    "Provide a centralized, secure authentication service for pcstyle.dev ecosystem users.",
    "Enable seamless sign-in and sign-up using WorkOS hosted authentication with OAuth support.",
    "Maintain session management with cross-subdomain cookie support ensuring persistent authentication across pcssstyle.dev subdomains.",
    "Ensure real-time synchronization of user data between WorkOS and the application database (Convex).",
    "Offer reusable UI components to maintain a consistent cybernetic aesthetic across the platform."
  ],
  "key_features": [
    "Cybernetic-styled login page with Sign In and Create Account links, showing authenticated user info if logged in.",
    "OAuth callback endpoint to handle authentication redirects and set session cookies securely.",
    "Session API endpoint to provide current user authentication status and profile data with proper HTTP status codes.",
    "Middleware for automatic session management, token refresh, and authentication enforcement using WorkOS AuthKit.",
    "Webhook handlers syncing user lifecycle events from WorkOS to Convex database to keep user data up-to-date.",
    "Shared Auth Client SDK with hooks and helpers for integrating authentication into child applications.",
    "Reusable UI components such as Matrix Background, CRT Overlay, and Neural Cursor enhancing the cybernetic UI theme."
  ],
  "user_flow_summary": [
    "Sign In Flow: User visits login page, clicks 'Sign In', authenticates via WorkOS hosted login, redirected back with authenticated session shown.",
    "Sign Out Flow: Authenticated user clicks 'Sign Out', session is cleared, user sees the unauthenticated login page.",
    "Session Verification: Child apps query the Session API endpoint to validate active user sessions.",
    "User Data Sync: Webhooks listen for user creation, updates, and deletion events from WorkOS and update the Convex users table accordingly."
  ],
  "validation_criteria": [
    "Login page properly displays different views based on authentication state (signed in vs not).",
    "OAuth callback handles redirect correctly and sets session cookie without errors.",
    "Session API returns accurate user data when authenticated and returns 401 when unauthenticated.",
    "Middleware correctly enforces session management and refreshes tokens automatically.",
    "Webhook handlers accurately sync user lifecycle events to keep database consistent.",
    "Auth Client SDK functions correctly integrating authentication flows in child apps.",
    "UI components render correctly and maintain consistent cybernetic style across pages."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 16 (App Router)",
      "React 19",
      "WorkOS AuthKit",
      "Convex (real-time database)",
      "Tailwind CSS v4",
      "Framer Motion"
    ],
    "features": [
      {
        "name": "Login Page",
        "description": "Cybernetic-styled login UI with Sign In and Sign Up buttons that redirect to WorkOS hosted authentication. Shows authenticated user info when logged in.",
        "files": [
          "app/page.tsx"
        ]
      },
      {
        "name": "OAuth Callback",
        "description": "Handles OAuth redirect from WorkOS after successful authentication using AuthKit's handleAuth function.",
        "files": [
          "app/callback/route.ts"
        ]
      },
      {
        "name": "Session API",
        "description": "GET endpoint that returns current authenticated user data or 401 if not authenticated. Used by child apps for session verification.",
        "files": [
          "app/api/me/route.ts"
        ]
      },
      {
        "name": "AuthKit Middleware",
        "description": "Next.js middleware that handles session management, token refresh, and authentication enforcement using WorkOS AuthKit.",
        "files": [
          "middleware.ts"
        ]
      },
      {
        "name": "Convex User Sync",
        "description": "Webhook handlers that sync WorkOS user lifecycle events (created, updated, deleted) to the application's users table in Convex.",
        "files": [
          "convex/auth.ts",
          "convex/http.ts",
          "convex/schema.ts"
        ]
      },
      {
        "name": "Auth Client SDK",
        "description": "Shared SDK package with useUser hook and login/logout helpers for child apps to integrate with the auth service.",
        "files": [
          "packages/auth-client/src/index.ts"
        ]
      },
      {
        "name": "UI Components",
        "description": "Reusable UI components including Matrix background, CRT overlay, and Neural cursor for the cybernetic aesthetic.",
        "files": [
          "components/ui/MatrixBackground.tsx",
          "components/ui/CRTOverlay.tsx",
          "components/ui/NeuralCursor.tsx"
        ]
      }
    ]
  }
}
