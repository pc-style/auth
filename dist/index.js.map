{"version":3,"sources":["../src/index.ts","../src/types.ts","../src/hooks.ts"],"sourcesContent":["// Main exports\nexport * from './types';\nexport * from './hooks';\n\n// Middleware is exported from separate entry point\n// import { createAuthMiddleware } from '@pcstyle/auth/middleware'\n\n// Convex config is exported from separate entry point\n// import { createConvexAuthConfig } from '@pcstyle/auth/convex'\n","/**\n * User type from WorkOS AuthKit\n */\nexport interface User {\n    id: string;\n    email: string;\n    firstName: string | null;\n    lastName: string | null;\n    profilePictureUrl: string | null;\n    createdAt: string;\n    updatedAt: string;\n}\n\n/**\n * Session state returned by auth hooks\n */\nexport interface AuthState {\n    user: User | null;\n    isLoading: boolean;\n    isAuthenticated: boolean;\n}\n\n/**\n * Options for auth middleware configuration\n */\nexport interface AuthMiddlewareOptions {\n    /**\n     * Paths that don't require authentication\n     * @default []\n     */\n    publicPaths?: string[];\n\n    /**\n     * Custom redirect URI for OAuth callback\n     * @default 'https://auth.pcstyle.dev/callback'\n     */\n    redirectUri?: string;\n\n    /**\n     * Sign-in URL\n     * @default 'https://auth.pcstyle.dev'\n     */\n    signInUrl?: string;\n}\n\n/**\n * Convex user record\n */\nexport interface ConvexUser {\n    _id: string;\n    authId: string;\n    email: string;\n    name?: string;\n    avatarUrl?: string;\n    role: string;\n    createdAt: number;\n    updatedAt: number;\n}\n\n/**\n * Configuration for the auth SDK\n */\nexport interface AuthConfig {\n    /**\n     * The auth domain\n     * @default 'https://auth.pcstyle.dev'\n     */\n    authDomain?: string;\n\n    /**\n     * Cookie domain for cross-subdomain auth\n     * @default '.pcstyle.dev'\n     */\n    cookieDomain?: string;\n}\n\nexport const DEFAULT_AUTH_CONFIG: AuthConfig = {\n    authDomain: 'https://auth.pcstyle.dev',\n    cookieDomain: '.pcstyle.dev',\n};\n","'use client';\n\nimport { useAuth as useWorkOSAuth } from '@workos-inc/authkit-nextjs/components';\nimport type { AuthState } from './types';\n\n/**\n * Hook to get current authentication state\n *\n * @example\n * function ProfileButton() {\n *   const { user, isLoading, isAuthenticated } = useAuth();\n *\n *   if (isLoading) return <Spinner />;\n *   if (!isAuthenticated) return <LoginButton />;\n *   return <Avatar user={user} />;\n * }\n */\nexport function useAuth(): AuthState {\n    const { user, loading } = useWorkOSAuth();\n\n    return {\n        user: user ?? null,\n        isLoading: loading,\n        isAuthenticated: !!user,\n    };\n}\n\n/**\n * Hook to get current user (throws if not authenticated)\n *\n * @example\n * function Dashboard() {\n *   const user = useUser();\n *   return <h1>Welcome, {user.firstName}</h1>;\n * }\n */\nexport function useUser() {\n    const { user, isAuthenticated } = useAuth();\n\n    if (!isAuthenticated || !user) {\n        throw new Error('useUser must be used within an authenticated context');\n    }\n\n    return user;\n}\n\n/**\n * Helper to get sign-out URL\n */\nexport function getSignOutUrl(): string {\n    return 'https://auth.pcstyle.dev/signout';\n}\n\n/**\n * Helper to get sign-in URL with optional return path\n */\nexport function getSignInUrl(returnTo?: string): string {\n    const base = 'https://auth.pcstyle.dev';\n    if (!returnTo) return base;\n\n    const state = btoa(JSON.stringify({ returnTo }));\n    return `${base}?state=${encodeURIComponent(state)}`;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AC4EO,IAAM,sBAAkC;AAAA,EAC3C,YAAY;AAAA,EACZ,cAAc;AAClB;;;AC7EA,wBAAyC;AAelC,SAAS,UAAqB;AACjC,QAAM,EAAE,MAAM,QAAQ,QAAI,kBAAAA,SAAc;AAExC,SAAO;AAAA,IACH,MAAM,QAAQ;AAAA,IACd,WAAW;AAAA,IACX,iBAAiB,CAAC,CAAC;AAAA,EACvB;AACJ;AAWO,SAAS,UAAU;AACtB,QAAM,EAAE,MAAM,gBAAgB,IAAI,QAAQ;AAE1C,MAAI,CAAC,mBAAmB,CAAC,MAAM;AAC3B,UAAM,IAAI,MAAM,sDAAsD;AAAA,EAC1E;AAEA,SAAO;AACX;AAKO,SAAS,gBAAwB;AACpC,SAAO;AACX;AAKO,SAAS,aAAa,UAA2B;AACpD,QAAM,OAAO;AACb,MAAI,CAAC,SAAU,QAAO;AAEtB,QAAM,QAAQ,KAAK,KAAK,UAAU,EAAE,SAAS,CAAC,CAAC;AAC/C,SAAO,GAAG,IAAI,UAAU,mBAAmB,KAAK,CAAC;AACrD;","names":["useWorkOSAuth"]}